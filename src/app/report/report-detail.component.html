<!--<pre>{{report | json}}</pre>-->
<loading-container [loading]="loading">
  <div class="row" *ngIf="users">
    <div class="col-sm-9">
      <div class="blog-post">
        <h2 class="blog-post-title">{{report.name}}</h2>
        <p class="blog-post-meta">{{report.dateOfCreation | date:'medium'}} od <a href="#">{{users[report.customerId]}}</a></p>

        <p>{{report.reportText}}</p>
      </div>
      <div class="blog-post" *ngIf="report.solutionText">
        <h2 class="blog-post-title">Řešení</h2>
        <p class="blog-post-meta">{{report.solutionDate | date:'medium'}} od <a href="#">{{users[report.solvedUserCode]}}</a></p>

        <p>{{report.solutionText}}</p>
      </div>
      <div class="alert alert-info" role="alert" *ngIf="!report.solutionText">
        <div *ngIf="!isSolvingUser">
          Na řešení usilovně pracuje náš pracovník {{users[report.solvingUserCode]}}
        </div>

        <div *ngIf="isSolvingUser">
          <div class="form-group row">
          <label for="solutionText" class="col-sm-2 col-form-label">Text řešení</label>

            <div class="col-sm-10">
          <textarea name="solutionText" [(ngModel)]="solution.text"
                    class="form-control" id="solutionText" rows="4">
          </textarea>
            </div>
          </div>
          <div class="form-group row">
            <label for="difficulty" class="col-sm-2 col-form-label">Pracnost</label>
            <div class="col-sm-4">
              <input name="difficulty" [(ngModel)]="solution.difficulty"
                     type="number" class="form-control" id="difficulty"
                     placeholder="Pracnost">
            </div>
            <div class="col-sm-3"></div>
            <div class="col-sm-3 text-xs-right">
              <button type="button" class="btn btn-info" (click)="onSolutionBtnClick()">Odeslat řešení</button>
            </div>
          </div>
        </div>
      </div>

      <!--<div class="row">-->
        <!--<h5>Text hlášení</h5>-->
        <!--<p class="text-sm-left">{{report.reportText}}</p>-->
        <!--<dl class="row">-->
          <!--<dt class="col-sm-6">Kod řešitele</dt>-->
          <!--<dd class="col-sm-6">{{report.solvingUserCode}}</dd>-->
        <!--</dl>-->
      <!--</div>-->
      <!--<div class="row">-->
        <!--<h5>Řešení</h5>-->
        <!--<p class="text-sm-left">fewfwefwef f wef w fwe few fwe fwfew{{report.solutionText}}</p>-->
        <!--<dl class="row">-->
          <!--<dt class="col-sm-6">Kod řešitele</dt>-->
          <!--<dd class="col-sm-6">{{report.solvingUserCode}}</dd>-->
          <!--<dt class="col-sm-6">Kod garanta</dt>-->
          <!--<dd class="col-sm-6">{{report.garantUserCode}}</dd>-->
          <!--<dt class="col-sm-6">Kod uzivatele resi</dt>-->
          <!--<dd class="col-sm-6">{{report.solvingUserCode}}</dd>-->
          <!--<dt class="col-sm-6">Kod uzivatele vyresil</dt>-->
          <!--<dd class="col-sm-6">{{report.solvedUserCode}}</dd>-->
          <!--<dt class="col-sm-6">Datum vyreseni</dt>-->
          <!--<dd class="col-sm-6">{{report.solutionDate | date:'medium'}}</dd>-->
        <!--</dl>-->

      <!--</div>-->
      <communication  [reportId]="report.id" ></communication>
    </div>
    <div class="col-sm-3">
      <div class="pb-1">
        <button type="button" class="btn btn-info" (click)="onEditBtnClick()">Editovat hlášení</button>
      </div>
      <table class="table table-striped">
        <tbody>
        <tr>
          <th scope="row">Rok</th>
          <td>{{report.reportYear}}</td>
        </tr>
        <tr>
          <th scope="row">Typ</th>
          <td>{{report.reportType}}</td>
        </tr>
        <tr>
          <th scope="row">Systém</th>
          <td>{{names.systemName}}</td>
        </tr>
        <!--<tr>-->
          <!--<th scope="row">Datum vzniku</th>-->
          <!--<td>{{report.dateOfCreation | date:'medium'}}</td>-->
        <!--</tr>-->
        <tr>
          <th scope="row">Název společnosti</th>
          <td>{{names.companyName}}</td>
        </tr>
        <tr>
          <th scope="row">Zákazník</th>
          <td>{{users[report.customerId]}}</td>
        </tr>
        <tr>
          <th scope="row">Termin</th>
          <td>{{report.dueDate | date:'medium'}}</td>
        </tr>
        <tr>
          <th scope="row">Obtížnost</th>
          <td>{{report.difficulty}}</td>
        </tr>
        <tr>
          <th scope="row">Datum poslední změny</th>
          <td>{{report.lastChangeDate | date:'medium'}}</td>
        </tr>
        <tr>
          <th scope="row">Pracnost</th>
          <td>{{report.difficulty}}</td>
        </tr>
        </tbody>
      </table>
    </div>

  </div>

</loading-container>
